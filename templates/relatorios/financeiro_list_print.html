{% extends 'relatorios/print_base.html' %}
{% block title %}Financeiro - Relatório{% endblock %}
{% block header %}Financeiro - Contas e Pagamentos{% endblock %}
{% block content %}
<h2>Contas a Receber</h2>
<table>
    <thead>
        <tr>
            <th>Cliente</th>
            <th>Valor</th>
            <th>Vencimento</th>
            <th>Status</th>
            <th>Dias Atraso</th>
        </tr>
    </thead>
    <tbody>
        {% for c in contas_receber %}
        <tr>
            <td>{{ c.cliente.nome }}</td>
            <td class="right">R$ {{ c.valor }}</td>
            <td>{{ c.data_vencimento|date:"d/m/Y" }}</td>
            <td>{{ c.get_status_display }}</td>
            <td class="right">{{ c.dias_em_atraso }}</td>
        </tr>
        {% empty %}
        <tr><td colspan="5">Nenhuma conta a receber.</td></tr>
        {% endfor %}
    </tbody>
</table>

<h2 style="margin-top:18px">Contas a Pagar</h2>
<table>
    <thead>
        <tr>
            <th>Fornecedor</th>
            <th>Descrição</th>
            <th>Valor</th>
            <th>Vencimento</th>
            <th>Status</th>
        </tr>
    </thead>
    <tbody>
        {% for c in contas_pagar %}
        <tr>
            <td>{{ c.fornecedor.nome|default:'-' }}</td>
            <td>{{ c.descricao }}</td>
            <td class="right">R$ {{ c.valor }}</td>
            <td>{{ c.data_vencimento|date:"d/m/Y" }}</td>
            <td>{{ c.get_status_display }}</td>
        </tr>
        {% empty %}
        <tr><td colspan="5">Nenhuma conta a pagar.</td></tr>
        {% endfor %}
    </tbody>
</table>

<h2 style="margin-top:18px">Pagamentos</h2>
<table>
    <thead>
        <tr>
            <th>Serviço</th>
            <th>Forma</th>
            <th>Valor</th>
            <th>Data</th>
        </tr>
    </thead>
    <tbody>
        {% for p in pagamentos %}
        <tr>
            <td>{{ p.servico }}</td>
            <td>{{ p.get_forma_pagamento_display }}</td>
            <td class="right">R$ {{ p.valor }}</td>
            <td>{{ p.data|date:"d/m/Y" }}</td>
        </tr>
        {% empty %}
        <tr><td colspan="4">Nenhum pagamento registrado.</td></tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
